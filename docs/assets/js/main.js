"use strict";const textSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-search-btn"),list=document.querySelector(".js-list"),listFavourites=document.querySelector(".js-list-favourites");let info=[],itemList=[],favourites=[],favouritesId=[],btnRemove=[];function getAndPaintData(t){t.preventDefault(),getDataFromServer()}function getDataFromServer(){fetch(`http://api.tvmaze.com/search/shows?q=${textSearch.value}`).then(t=>t.json()).then(t=>{paintData(info=t)})}function paintData(){list.innerHTML="";for(let t=0;t<info.length;t++){let e;e=null===info[t].show.image?`https://via.placeholder.com/210x295/ffffff/666666/?text=${info[t].show.name}`:info[t].show.image.medium,list.innerHTML+=`<li class="itemList js-itemList ${addFavouriteClass(t)}" data-index="${t}" ><img src="${e}" alt="${info[t].show.name}">\n      <p>${info[t].show.name}</p>\n</li>`}itemList=document.querySelectorAll(".js-itemList");for(const t of itemList)t.addEventListener("click",addToFavourite)}function addToFavourite(t){const e=t.currentTarget;!1===favouritesId.includes(info[e.dataset.index].show.id)&&(favourites.push(info[e.dataset.index]),favouritesId.push(info[e.dataset.index].show.id)),console.log(favouritesId),paintData(),paintFavourites(),handleFormData(favourites)}function paintFavourites(){listFavourites.innerHTML="";for(let t=0;t<favourites.length;t++){let e;e=null===favourites[t].show.image?`https://via.placeholder.com/210x295/ffffff/666666/?text=${favourites[t].show.name}`:favourites[t].show.image.medium,listFavourites.innerHTML+=`\n    <li class="main_section_favourites_list_li">\n    <div class="main_section_favourites_list_info"><img class="imglist" src="${e}" alt="">\n        <p>${favourites[t].show.name}</p>\n        </div>\n        <button class="btn-remove js-btnRemove" data-btnindex="${t}">X</button>\n  </li>`}btnRemove=document.querySelectorAll(".js-btnRemove");for(const t of btnRemove)t.addEventListener("click",removeFromFavourites)}const addFavouriteClass=t=>favouritesId.includes(info[t].show.id)?"favourite":"";function handleFormData(t){localStorage.setItem("userData",JSON.stringify(t))}function removeFromFavourites(t){const e=parseInt(t.currentTarget.dataset.btnindex);favourites.splice(e,1),favouritesId.splice(e,1),paintData(),paintFavourites(),handleFormData(favourites)}function getLocalStorage(){const t=JSON.parse(localStorage.getItem("userData"));if(t)for(const e of t)favourites.push(e),favouritesId.push(e.show.id),paintFavourites()}getLocalStorage(),btnSearch.addEventListener("click",getAndPaintData);
"use strict";const textSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-search-btn"),list=document.querySelector(".js-list"),listFavourites=document.querySelector(".js-list-favourites");let info=[],itemList=[],favourites=[],favouritesId=[];function getAndPaintData(t){t.preventDefault(),getDataFromServer()}function getDataFromServer(){fetch(`http://api.tvmaze.com/search/shows?q=${textSearch.value}`).then(t=>t.json()).then(t=>{paintData(info=t)})}function paintData(){list.innerHTML="";for(let t=0;t<info.length;t++){let e;e=null===info[t].show.image?`https://via.placeholder.com/210x295/ffffff/666666/?text=${info[t].show.name}`:info[t].show.image.medium,list.innerHTML+=`<li class="itemList js-itemList ${addFavouriteClass(t)}" data-index="${t}" ><img src="${e}" alt="${info[t].show.name}">\n      <p>${info[t].show.name}</p>\n</li>`}itemList=document.querySelectorAll(".js-itemList");for(const t of itemList)t.addEventListener("click",addToFavourite)}function addToFavourite(t){const e=t.currentTarget;favourites.push(info[e.dataset.index]),favouritesId.push(info[e.dataset.index].show.id),console.log(favouritesId),paintFavourites(),paintData(),handleFormData(favourites)}function paintFavourites(){listFavourites.innerHTML="";for(const t of favourites)listFavourites.innerHTML+=`<li><img class="imglist" src="${t.show.image.medium}" alt="">\n        <p>${t.show.name}</p>\n        <button class="btn-remove js-btnRemove">X</button>\n  </li>`}const addFavouriteClass=t=>favouritesId.includes(info[t].show.id)?"favourite":"";function handleFormData(t){localStorage.setItem("userData",JSON.stringify(t))}function getLocalStorage(){const t=JSON.parse(localStorage.getItem("userData"));if(console.log(t),t)for(const e of t)favourites.push(e),favouritesId.push(e.show.id),paintFavourites()}btnSearch.addEventListener("click",getAndPaintData),getLocalStorage();